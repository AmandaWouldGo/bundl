<!DOCTYPE html>
<html>
<head>
	<title>GameGyft</title>
	<link rel="stylesheet" type="text/css" href="game.css">
	 <link rel="stylesheet" type="text/css"
          href="https://fonts.googleapis.com/css?family=Orbitron">
    <style>
      body {
        font-family: 'Orbitron', serif;
        font-size: 30px;
        position: auto;
      }
    </style>
    	<script src="assets/jquery-3.1.1.min.js"></script>
	<script src="gamegyft.js"></script>
</head>
<body>
	<div>
		<h1>GameGyft</h1>
	</div>
	<canvas id="gameCanvas" width="500" height="350" style="background: url('backImage.jpg')">
		<div id="overlay1" ><img src="Apple_Pin.PNG"></div>
		<div id="overlay2"><img src="Apple_Pin.PNG"></div>
		<div id="overlay3"><img src="Apple_Pin.PNG"></div>
		<div id="overlay4"><img src="Apple_Pin.PNG"></div>
	</canvas>
	<div><input type="button" 
	   value="Simulate Game Won - Fund Card Now!" 
	   onclick="fund_card();" />
</div>
	<section>

<script type="text/javascript">

var canvas;
var ctx;
var x = 75;
var y = 50;
var WIDTH = 500;
var HEIGHT = 350;
var dragok = false;
var img = new Image();   // Create new img element
img.src = 'backImage.jpg'; // Set source path
img.style.width = "500px";
img.style.height = "350px";
var gameCanvas = document.getElementById("gameCanvas");
var basketImg = new Image();
var basketBottomImg = new Image();
var appleImg = new Image();
var appleImg2 = new Image();
var appleImg3 = new Image();
var appleImg4 = new Image();
 appleImg.src = "Apple_Pin.PNG";
  appleImg2.src = "Apple_Pin.PNG";
   appleImg3.src = "Apple_Pin.PNG";
    appleImg4.src = "Apple_Pin.PNG";
var appleX = 0;
var appleY = 0;
var appleCount = 0;

function rect(x,y,w,h) {

 ctx.beginPath();
 ctx.rect(x,y,w,h);
 ctx.closePath();
 ctx.fill();
}


function clear() {
 ctx.clearRect(0, 0, WIDTH, HEIGHT);

}

function makeApple() {
	appleImg = new Image();
	appleImg.src = "Apple_Pin.PNG";
	ctx.drawImage(appleImg, x + 180, y+1)
}

function init() {
 canvas = document.getElementById("gameCanvas");
 ctx = canvas.getContext("2d");
 return setInterval(draw, 10);
 makeApple();
 makeApple();
 makeApple();
}

function draw() {
 clear();
 makeApple();
 basketImg.src = "basket.png";
 basketBottomImg.src = "basket_bottom.png";
 ctx.fillStyle = "#444444";
 ctx.drawImage(gameCanvas, 0, 0);
 rect(x - 15, y - 15, 20, 20);  // small rectangle
 ctx.drawImage(basketImg, 250, 160);
 ctx.drawImage(appleImg, x - 18, y - 33);
 // ctx.drawImage(appleImg2, x - 45, y - 20);
 // ctx.drawImage(appleImg3, x - 18, y - 33);
 // ctx.drawImage(appleImg4, x - 18, y - 33);
 ctx.drawImage(basketBottomImg, 250, 160);
}

function myMove(e){
 if (dragok){
  x = e.pageX - canvas.offsetLeft;
  appleX = x;
  console.log("this is appleX")
  console.log(appleX);
  console.log("this is y:")
  console.log(y);
  y = e.pageY - canvas.offsetTop;
  appleY = y;
 }
}

function myDown(e){
 
 if (e.pageX < x + 15 + canvas.offsetLeft && e.pageX > x - 15 +
 canvas.offsetLeft && e.pageY < y + 15 + canvas.offsetTop &&
 e.pageY > y -15 + canvas.offsetTop){
  x = e.pageX - canvas.offsetLeft;
  y = e.pageY - canvas.offsetTop;
  dragok = true;
  canvas.onmousemove = myMove;
 }

 if (x > 290 && y > 296){
 	appleCount += 1;
 }
 if (appleCount > 5){
 	alert("You win!")
 }

}

function myUp(){
 dragok = false;
 canvas.onmousemove = null;
}

function crashWith(otherobj) {
			var myleft = this.x;
			var myright = this.x + (this.width);
			var mytop = this.y;
			var appleBottom = this.y + (this.height);
			var otherleft = otherobj.x;
			var otherright = otherobj.x + (otherobj.width);
			var othertop = otherobj.y;
			var otherbottom = otherobj.y + (otherobj.height);
			var crash = true;
			if ((mybottom < othertop) ||
					(mytop > otherbottom) ||
					(myright < otherleft) ||
					(myleft > otherright)) {
				crash = false;
			}
			return crash;
		}

init();
canvas.onmousedown = myDown;
canvas.onmouseup = myUp;

</script>

</section>
</body>
</html>